(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{F4UR:function(t,o,e){"use strict";e.r(o),e.d(o,"LoginPageModule",(function(){return h}));var i=e("ofXK"),n=e("3Pt+"),a=e("TEn/"),s=e("tyNb"),r=e("fXoL"),c=e("2g2N"),l=e("N+K7"),b=e("7ch9");function p(t,o){if(1&t&&(r.Kb(0,"ion-select-option",22),r.fc(1),r.Jb()),2&t){const t=o.$implicit;r.Yb("value",t.Codigo),r.xb(1),r.hc("",t.Nombre," ")}}const u=function(){return["/forgot-password"]},d=function(){return["/signup"]},m=[{path:"",component:(()=>{class t{constructor(t,o,e,i){this.router=t,this.toastService=o,this.service=e,this.loadingService=i,this.postData={tipo:"",documento:"",clave:"",terminos:!1},this.showPasswordText=!1}ngOnInit(){this.getDocumentos()}ionViewWillLeave(){this.postData={tipo:"",documento:"",clave:"",terminos:!1}}getDocumentos(){this.service.get("tipodocumento.json").subscribe(t=>{this.listdocumentos=t})}validateInputs(){let t=this.postData.tipo.trim(),o=this.postData.documento.trim(),e=this.postData.clave.trim();return this.postData.tipo&&this.postData.documento&&this.postData.clave&&t.length>0&&o.length>0&&e.length>0&&1==this.postData.terminos}loginAction(){this.validateInputs()?(this.showPasswordText=!1,this.loadingService.presentLoading(),this.service.post("servicios/autenticacion/iniciar-sesion",this.postData).subscribe(t=>{let o;o=t,this.loadingService.closeLoading(),this.toastService.presentToast({message:o.mensaje,codigo:o.codigo}),"0"==o.codigo&&(this.saveSesion(o),this.router.navigate(["home"])),"1"==o.codigo&&setTimeout(()=>{this.router.navigate(["/changepassword"],{queryParams:{tipodocumento:this.postData.tipo,documento:this.postData.documento}})},3e3)})):this.showvalidateInputs()}saveSesion(t){localStorage.setItem("id",t.id_afiliado),localStorage.setItem("tipodocumento",this.postData.tipo),localStorage.setItem("documento",this.postData.documento),localStorage.setItem("estado",t.estado_afiliado),localStorage.setItem("nombre_afi",t.nombre_afi),localStorage.setItem("nombre_afiliado",t.nombre_afiliado),localStorage.setItem("tipo_familia",t.tipo_afiliado),localStorage.setItem("token",t.token),localStorage.setItem("tipo_afil",t.tipo_afil),localStorage.setItem("correo_afiliado",t.correo_afiliado)}showvalidateInputs(){var t="",o=!1;""==this.postData.tipo&&""==this.postData.documento&&""==this.postData.clave&&0==o&&(t="Ingrese Tipo Documento, Documento y  Contrase\xf1a.",o=!0),""==this.postData.tipo&&0==o&&(t="Ingrese Tipo Documento.",o=!0),""==this.postData.documento&&0==o&&(t="Ingrese Documento",o=!0),""==this.postData.clave&&0==o&&(t="Ingrese Contrase\xf1a.",o=!0),0==this.postData.terminos&&0==o&&(t="Por favor debe Aceptar los Terminos",o=!0),o=!1,this.toastService.presentToast({message:t,codigo:"1"})}}return t.\u0275fac=function(o){return new(o||t)(r.Hb(s.h),r.Hb(c.a),r.Hb(l.a),r.Hb(b.a))},t.\u0275cmp=r.Bb({type:t,selectors:[["app-login"]],decls:48,vars:12,consts:[[1,"ion-padding"],[1,"ion-text-center"],[3,"ngSubmit"],["position","stacked"],["cancelText","Cancelar","name","tipodocumento","interface","action-sheet","required","",3,"interfaceOptions","ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["autocomplete","off","type","text","name","documento",3,"ngModel","ngModelChange","keyup.enter"],["autocomplete","off","name","clave","required","",3,"type","ngModel","ngModelChange","keyup.enter"],["slot","end","color","primary",2,"margin-top","auto",3,"name","click"],[1,"ion-text-right",2,"font-size","13px"],[1,"text-decoration",3,"routerLink"],[2,"margin-bottom","10px","margin-left","auto","margin-right","auto","display","table"],[2,"width","0%","float","left","margin-left","5px"],["slot","start","name","terminos",3,"ngModel","ngModelChange"],[2,"width","90%","float","right","font-size","13px"],["routerLink","/terms",1,"text-decoration"],["routerLink","/politics",1,"text-decoration"],["routerLink","/law",1,"text-decoration"],["shape","round","type","submit",1,"text-transform-initial","style-button-action"],[1,"login"],["src","assets/img/iconcajcopipeque.png","alt","Icon EPS",1,"img-cajacacopi"],[3,"value"]],template:function(t,o){1&t&&(r.Kb(0,"ion-content",0),r.Kb(1,"div",1),r.Kb(2,"h1"),r.fc(3,"Iniciar Sesi\xf3n"),r.Jb(),r.Jb(),r.Kb(4,"form",2),r.Sb("ngSubmit",(function(){return o.loginAction()})),r.Kb(5,"ion-list"),r.Kb(6,"ion-item"),r.Kb(7,"ion-label",3),r.fc(8,"Tipo Documento"),r.Jb(),r.Kb(9,"ion-select",4),r.Sb("ngModelChange",(function(t){return o.postData.tipo=t})),r.Kb(10,"ion-select-option",5),r.fc(11,"Seleccionar "),r.Jb(),r.ec(12,p,2,2,"ion-select-option",6),r.Jb(),r.Jb(),r.Kb(13,"ion-item"),r.Kb(14,"ion-label",3),r.fc(15,"Documento"),r.Jb(),r.Kb(16,"ion-input",7),r.Sb("ngModelChange",(function(t){return o.postData.documento=t}))("keyup.enter",(function(){return o.loginAction()})),r.Jb(),r.Jb(),r.Kb(17,"ion-item"),r.Kb(18,"ion-label",3),r.fc(19,"Contrase\xf1a"),r.Jb(),r.Kb(20,"ion-input",8),r.Sb("ngModelChange",(function(t){return o.postData.clave=t}))("keyup.enter",(function(){return o.loginAction()})),r.Jb(),r.Kb(21,"ion-icon",9),r.Sb("click",(function(){return!!o.postData.clave&&(o.showPasswordText=!o.showPasswordText)})),r.Jb(),r.Jb(),r.Kb(22,"p",10),r.Kb(23,"a",11),r.fc(24,"\xbfHas olvidado tu contrase\xf1a?"),r.Jb(),r.Jb(),r.Kb(25,"div",12),r.Kb(26,"div",13),r.Kb(27,"ion-checkbox",14),r.Sb("ngModelChange",(function(t){return o.postData.terminos=t})),r.Jb(),r.Jb(),r.Kb(28,"div",15),r.Kb(29,"span"),r.fc(30," Acepto los "),r.Kb(31,"a",16),r.fc(32,"T\xe9rminos del Servicio"),r.Jb(),r.fc(33,", "),r.Kb(34,"a",17),r.fc(35,"Pol\xedtica de Privacidad"),r.Jb(),r.fc(36," y "),r.Kb(37,"a",18),r.fc(38,"Ley de Datos Personales"),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Jb(),r.Kb(39,"ion-button",19),r.fc(40," Iniciar sesi\xf3n "),r.Jb(),r.Jb(),r.Kb(41,"p",20),r.fc(42,"\xbfA\xfan no tienes una cuenta? "),r.Ib(43,"br"),r.Kb(44,"a",11),r.fc(45,"Crear una cuenta"),r.Jb(),r.Jb(),r.Kb(46,"div"),r.Ib(47,"img",21),r.Jb(),r.Jb()),2&t&&(r.xb(9),r.Xb("interfaceOptions",o.customActionSheetOptions)("ngModel",o.postData.tipo),r.xb(3),r.Xb("ngForOf",o.listdocumentos),r.xb(4),r.Xb("ngModel",o.postData.documento),r.xb(4),r.Xb("type",o.showPasswordText?"text":"password")("ngModel",o.postData.clave),r.xb(1),r.Xb("name",o.showPasswordText?"eye-outline":"eye-off-outline"),r.xb(2),r.Xb("routerLink",r.Zb(10,u)),r.xb(4),r.Xb("ngModel",o.postData.terminos),r.xb(17),r.Xb("routerLink",r.Zb(11,d)))},directives:[a.o,n.k,n.f,n.g,a.v,a.t,a.u,a.D,a.T,n.j,n.e,n.h,a.E,i.i,a.s,a.U,a.r,s.j,a.S,a.l,a.b,a.h],styles:[""]}),t})()}];let g=(()=>{class t{}return t.\u0275mod=r.Fb({type:t}),t.\u0275inj=r.Eb({factory:function(o){return new(o||t)},imports:[[s.k.forChild(m)],s.k]}),t})(),h=(()=>{class t{}return t.\u0275mod=r.Fb({type:t}),t.\u0275inj=r.Eb({factory:function(o){return new(o||t)},imports:[[i.b,n.a,a.M,g]]}),t})()}}]);